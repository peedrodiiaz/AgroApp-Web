<div class="container-fluid">
  <nav aria-label="breadcrumb" class="mt-1 mb-3">
    <ol class="breadcrumb">
      <li class="breadcrumb-item">
        <a (click)="volver()" style="cursor:pointer;">
          <i class="bi bi-arrow-left"></i> Volver a Incidencias
        </a>
      </li>
    </ol>
  </nav>

  <div class="d-flex flex-wrap justify-content-between align-items-center mb-3 gap-3">
    <div>
      <h4 class="fw-bold">Editar Incidencia</h4>
      <div class="text-muted small">ID: {{ f.codigo.value }}</div>
    </div>
    <div class="d-flex gap-2">
      <button class="btn btn-outline-secondary" type="button" (click)="cancelar()">Cancelar</button>
      <button class="btn btn-success" (click)="guardar()">Guardar Cambios</button>
    </div>
  </div>

  <form [formGroup]="editarForm" novalidate autocomplete="off">
    <div class="card p-4 mb-3">
      <!-- Estado y Prioridad -->
      <div class="row mb-4">
        <div class="col-md-6 mb-3 mb-md-0">
          <label class="form-label">Estado</label>
          <input type="text" class="form-control" formControlName="estado"  style="background:#f6f8fa;" />
        </div>
        <div class="col-md-6">
          <label class="form-label">Prioridad</label>
          <input type="text" class="form-control" formControlName="prioridad"  style="background:#f6f8fa;" />
        </div>
      </div>

      <!-- Etiquetas visuales -->
      <div class="mb-3">
        <span class="badge bg-secondary me-2">Cerrado</span>
        <span class="badge bg-info">Prioridad Baja</span>
      </div>

      <!-- Información General -->
      <div class="row mb-4">
        <div class="col-md-6">
          <label class="form-label">Trabajador Reportante</label>
          <input type="text" class="form-control" formControlName="trabajador"  style="background:#f6f8fa;">
          <input type="text" class="form-control mt-2" formControlName="codigo"  style="background:#f6f8fa;">
        </div>
        <div class="col-md-6">
          <label class="form-label">Máquina Afectada</label>
          <input type="text" class="form-control" formControlName="maquina"  style="background:#f6f8fa;">
        </div>
      </div>
      <div class="row mb-4">
        <div class="col-md-6">
          <label class="form-label">Fecha de Publicación</label>
          <input type="date" class="form-control" formControlName="fechaPublicacion" style="background:#f6f8fa;">
        </div>
        <div class="col-md-6">
          <label class="form-label">Fecha de Cierre</label>
          <input type="date" class="form-control" formControlName="fechaCierre">
        </div>
      </div>
      <div class="mb-4">
        <label class="form-label">Categoría</label>
        <input type="text" class="form-control" formControlName="categoria">
      </div>

      <!-- Descripción -->
      <div class="mb-2">
        <div class="form-label fw-semibold mb-1">Descripción del Problema</div>
        <textarea class="form-control" rows="3" formControlName="descripcion"
          [class.is-invalid]="f.descripcion.touched && f.descripcion.invalid"></textarea>
        @if (f.descripcion.touched && f.descripcion.invalid) {
          <div class="invalid-feedback">Descripción obligatoria (máx 300).</div>
        }
      </div>
    </div>
  </form>
</div>
