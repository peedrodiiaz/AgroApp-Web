<div class="container-fluid py-4">

  <!-- Breadcrumb -->
  <nav aria-label="breadcrumb" class="mb-3">
    <ol class="breadcrumb">
      <li class="breadcrumb-item">
        <a (click)="volverListado()" style="cursor: pointer;">
          <i class="bi bi-house-door"></i>
        </a>
      </li>
      <li class="breadcrumb-item">
        <a (click)="volverListado()" style="cursor: pointer;">Máquinas</a>
      </li>
      <li class="breadcrumb-item active" aria-current="page">Información</li>
    </ol>
  </nav>

  <!-- Título -->
  <h2 class="fw-bold mb-4">{{ maquina.nombre }} {{ maquina.modelo }}</h2>

  <div class="row g-4">

    <!-- Columna Izquierda -->
    <div class="col-12 col-lg-6">

      <!-- Card GENERAL -->
      <div class="card shadow-sm mb-4">
        <div class="card-body">
          <h5 class="card-title fw-bold mb-3">GENERAL</h5>

          <div class="info-row">
            <span class="info-label">Matrícula</span>
            <span class="info-value">{{ maquina.matricula }}</span>
          </div>

          <div class="info-row">
            <span class="info-label">Modelo</span>
            <span class="info-value">{{ maquina.modelo }}</span>
          </div>

          <div class="info-row">
            <span class="info-label">Fecha Compra</span>
            <span class="info-value">{{ maquina.fechaCompra }}</span>
          </div>

          <div class="info-row">
            <span class="info-label">Localización</span>
            <span class="info-value">{{ maquina.localizacion }}</span>
          </div>
        </div>
      </div>

      <!-- Botones de Acción -->
      <div class="d-flex gap-3 mb-4">
        <button class="btn btn-success flex-fill" (click)="editarMaquina()">
          <i class="bi bi-pencil-square me-2"></i>Editar
        </button>
        <button class="btn btn-danger flex-fill" (click)="eliminarMaquina()">
          <i class="bi bi-trash me-2"></i>Eliminar
        </button>
      </div>

    </div>

    <!-- Columna Derecha -->
    <div class="col-12 col-lg-6">

      <!-- Card TRABAJADOR -->
      <div class="card shadow-sm mb-4">
        <div class="card-body">
          <h5 class="card-title fw-bold mb-3">TRABAJADOR</h5>

          <div class="d-flex align-items-center gap-3">
            <img [src]="trabajador.avatar" alt="Avatar" class="rounded-circle" width="80" height="80">
            <div>
              <h6 class="mb-1 fw-bold">{{ trabajador.nombre }}</h6>
              <small class="text-muted">Fecha de inicio: {{ trabajador.fechaInicio }}</small>
            </div>
          </div>
        </div>
      </div>

      <!-- Card INCIDENCIAS -->
      <div class="card shadow-sm mb-4">
        <div class="card-body">
          <h5 class="card-title fw-bold mb-3">INCIDENCIAS</h5>

          <div class="table-responsive">
            <table class="table table-sm table-hover mb-0">
              <thead class="table-success">
                <tr>
                  <th>Estado</th>
                  <th>Descripción</th>
                  <th>Fecha</th>
                </tr>
              </thead>
              <tbody>
                @for (incidencia of incidencias; track incidencia.id) {
                  <tr>
                    <td>
                      <span class="badge"
                            [class.bg-warning]="incidencia.estado === 'Abierta'"
                            [class.bg-secondary]="incidencia.estado === 'Cerrada'">
                        {{ incidencia.estado }}
                      </span>
                    </td>
                    <td>{{ incidencia.descripcion }}</td>
                    <td>{{ incidencia.fecha }}</td>
                  </tr>
                }
              </tbody>
            </table>
          </div>
        </div>
      </div>

    </div>

  </div>

  <!-- Sección CRONOGRAMA (Full Width) -->
  <div class="card shadow-sm">
    <div class="card-body">
      <h5 class="card-title fw-bold mb-3">CRONOGRAMA</h5>

      <full-calendar [options]="calendarOptions"></full-calendar>
    </div>
  </div>

</div>
